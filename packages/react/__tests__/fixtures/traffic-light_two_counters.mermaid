stateDiagram-v2
	[*] --> Off: Reset (initialCounter=0, initialCounter2=0)

	Off --> Red: Switch
	Red --> RedYellow: Switch
	RedYellow --> Green: Switch
	Green --> Yellow: Switch
	Yellow --> Red: Switch

	Red --> Red: Switch_1
	RedYellow --> RedYellow: Switch_1
	Green --> Green: Switch_1
	Yellow --> Yellow: Switch_1

note right of [*]
#{ counter, counter2 } <= coalesce($initialCounter, #counter), coalesce($initialCounter2, #counter2)
end note

note left of Off
+Init #{ counter = 0, counter2 = 0 }
end note


%% set counter = inc(counter) only when currentActionName() == 'Switch' (otherwise keep counter as is);
%% set counter2 = inc(counter2) only when currentActionName() == 'Switch_1' (otherwise keep counter2 as is).
note right of Red
#{ counter, counter2 } <= if(isEqual(currentActionName(), 'Switch'), inc(#counter), #counter), if(isEqual(currentActionName(), 'Switch_1'), inc(#counter2), #counter2)
end note
note right of RedYellow
#{ counter, counter2 } <= if(isEqual(currentActionName(), 'Switch'), inc(#counter), #counter), if(isEqual(currentActionName(), 'Switch_1'), inc(#counter2), #counter2)
end note
note right of Green
#{ counter, counter2 } <= if(isEqual(currentActionName(), 'Switch'), inc(#counter), #counter), if(isEqual(currentActionName(), 'Switch_1'), inc(#counter2), #counter2)
end note
note right of Yellow
#{ counter, counter2 } <= if(isEqual(currentActionName(), 'Switch'), inc(#counter), #counter), if(isEqual(currentActionName(), 'Switch_1'), inc(#counter2), #counter2)
end note
